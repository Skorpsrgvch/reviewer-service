# Reviewer Service ‚Äî –°–µ—Ä–≤–∏—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≤—å—é–µ—Ä–æ–≤ –Ω–∞ Pull Request'—ã

–≠—Ç–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≤—å—é–µ—Ä–æ–≤ –Ω–∞ Pull Request‚Äô—ã –∏–∑ –∫–æ–º–∞–Ω–¥—ã –∞–≤—Ç–æ—Ä–∞, –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≤—å—é–≤–µ—Ä–æ–≤ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ PR‚Äô–æ–≤, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ Go + PostgreSQL, —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ HTTP API, –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `docker-compose`.

---

## üß© –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- –Ø–∑—ã–∫: **Go 1.23**
- –ë–î: **PostgreSQL**
- –í–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫: **Gin**
- –ú–∏–≥—Ä–∞—Ü–∏–∏: **golang-migrate**
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è: **Docker + docker-compose**

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
# –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Skorpsrgvch/reviewer-service.git
cd reviewer-service

# –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–∏—Å
docker-compose up --build -d

```
---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø–∞–º —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (Clean Architecture), —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–ª–∞–±—É—é —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å –∏ –≥–∏–±–∫–æ—Å—Ç—å –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ –∏–ª–∏ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–ª–æ—è:

- domain/ ‚Äî —Å–æ–¥–µ—Ä–∂–∏—Ç —á–∏—Å—Ç—ã–µ –±–∏–∑–Ω–µ—Å-—Å—É—â–Ω–æ—Å—Ç–∏ (PullRequest, User, Team) –∏ –æ—à–∏–±–∫–∏. –ù–∏–∫–∞–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ –º–∏—Ä–∞.
- usecase/ ‚Äî —Ä–µ–∞–ª–∏–∑—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É (—é–∑–∫–µ–π—Å—ã): —Å–æ–∑–¥–∞–Ω–∏–µ PR, –ø–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–µ–≤—å—é–µ—Ä–∞, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–∞–º–∏. –†–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏ –∏–∑ domain.
- adapter/ ‚Äî –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç –≤–Ω–µ—à–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã: HTTP-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ (http/) –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (postgres/). –†–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏–∑ usecase.
–¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ò–∑–æ–ª–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –æ—Ç –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
- –õ–µ–≥–∫–æ –ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã, –ø–æ–¥–º–µ–Ω—è—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
- –ú–µ–Ω—è—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ –±–µ–∑ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏.

---

## üìú API –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

–ü—Ä–∏–º–µ—Ä—ã –¥–ª—è **Postman**

**–î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É**:

```bash
POST http://localhost:8080/team/add
```
–í **Headers**:
[{"key":"Authorization","value":"Bearer admin"}}]

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (Body)**:
```bash
{
  "team_name": "backend5",
  "members": [
    { "user_id": "v1", "username": "author", "is_active": true },
    { "user_id": "v2", "username": "reviewer1", "is_active": true },
    { "user_id": "v3", "username": "reviewer2", "is_active": true },
    { "user_id": "v4", "username": "reviewer3", "is_active": true },
    { "user_id": "v5", "username": "reviewer4", "is_active": false }
  ]
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:
```bash
{
    "team": {
        "team_name": "backend5",
        "members": [
            {
                "user_id": "v1",
                "username": "author",
                "is_active": true
            },
            {
                "user_id": "v2",
                "username": "reviewer1",
                "is_active": true
            },
            {
                "user_id": "v3",
                "username": "reviewer2",
                "is_active": true
            },
            {
                "user_id": "v4",
                "username": "reviewer3",
                "is_active": true
            },
            {
                "user_id": "v5",
                "username": "reviewer4",
                "is_active": false
            }
        ]
    }
}
```

**–ü–æ–ª—É—á–∏—Ç—å –∫–æ–º–∞–Ω–¥—É**:

```bash
GET http://localhost:8080/team/get?team_name=backend5
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:
```bash
{
    "team": {
        "team_name": "backend5",
        "members": [
            {
                "user_id": "v1",
                "username": "author",
                "is_active": true
            },
            {
                "user_id": "v2",
                "username": "reviewer1",
                "is_active": true
            },
            {
                "user_id": "v3",
                "username": "reviewer2",
                "is_active": true
            },
            {
                "user_id": "v4",
                "username": "reviewer3",
                "is_active": true
            },
            {
                "user_id": "v5",
                "username": "reviewer4",
                "is_active": false
            }
        ]
    }
}
```

**–°–æ–∑–¥–∞—Ç—å PR**:

```bash
POST http://localhost:8080/pullRequest/create
```
–í **Headers**:
[{"key":"Authorization","value":"Bearer admin"}}]

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (Body)**:
```bash
{
  "pull_request_id": "pr-1",
  "pull_request_name": "Fix bug",
  "author_id": "v2"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:
```bash
{
    "pr": {
        "pull_request_id": "pr-1",
        "pull_request_name": "Fix bug",
        "author_id": "v2",
        "status": "OPEN",
        "assigned_reviewers": [
            "v1",
            "v4"
        ],
        "created_at": "2025-11-15T18:29:11Z"
    }
}
```

**–ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–∏—Ç—å PR**:

```bash
POST http://localhost:8080/pullRequest/reassign
```
–í **Headers**:
[{"key":"Authorization","value":"Bearer admin"}}]

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (Body)**:
```bash
{
  "pull_request_id": "pr-1",
  "old_reviewer_id": "v4"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:
```bash
{
    "pr": {
        "pull_request_id": "pr-1",
        "pull_request_name": "Fix bug",
        "author_id": "v2",
        "status": "OPEN",
        "assigned_reviewers": [
            "v1",
            "v3"
        ],
        "created_at": "2025-11-15T18:29:11Z"
    },
    "replaced_by": "v3"
}
```

**–°–ª–∏—Ç—å PR (–ø–æ—Å–ª–µ merge ‚Äî –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–µ—â–µ–Ω—ã)**:

```bash
POST http://localhost:8080/pullRequest/merge
```
–í **Headers**:
[{"key":"Authorization","value":"Bearer admin"}}]

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (Body)**:
```bash
{
  "pull_request_id": "pr-1"
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:
```bash
{
    "pr": {
        "pull_request_id": "pr-1",
        "pull_request_name": "Fix bug",
        "author_id": "v2",
        "status": "MERGED",
        "assigned_reviewers": [
            "v1",
            "v3"
        ],
        "created_at": "2025-11-15T18:29:11Z",
        "mergedAt": "2025-11-15T18:37:36Z"
    }
}
```

**–ò–∑–º–µ–Ω–∏—Ç—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**:

```bash
POST http://localhost:8080/users/setIsActive
```
–í **Headers**:
[{"key":"Authorization","value":"Bearer admin"}}]

**–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (Body)**:
```bash
{
  "user_id": "v5",
  "is_active": true
}
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:
```bash
{
    "user": {
        "user_id": "v5",
        "username": "reviewer4",
        "is_active": true,
        "team_name": "backend5"
    }
}
```

**–ü–æ–ª—É—á–∏—Ç—å PR, –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é**:

```bash
GET http://localhost:8080/users/getReview?user_id=v1
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:
```bash
{
    "user_id": "v1",
    "pull_requests": [
        {
            "pull_request_id": "pr-1",
            "pull_request_name": "Fix bug",
            "author_id": "v2",
            "status": "OPEN"
        }
    ]
}
```

**–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è–º**:

```bash
GET http://localhost:8080/stats
```

**–ü—Ä–∏–º–µ—Ä –æ—Ç–≤–µ—Ç–∞**:
```bash
{
    "assignments": {
        "v1": 1,
        "v3": 1
    }
}
```
---

# –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–¥–∞–Ω–∏—è

## üìä –≠–Ω–¥–ø–æ–∏–Ω—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã—Ö —Ä–µ–≤—å—é–µ—Ä–æ–≤:

- –ú–µ—Ç–æ–¥: GET
- –ü—É—Ç—å: /stats
- –û—Ç–≤–µ—Ç: JSON —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∞–∫—Ç–∏–≤–Ω—ã—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ **Pull Request‚Äô—ã** ‚Äî –ø–æ—Å–ª–µ —Å–ª–∏—è–Ω–∏—è (MERGED) –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ—Å—Ç–∞—é—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å—Å—è.

**–ü—Ä–∏–º–µ—Ä—ã —Ä–∞–±–æ—Ç—ã**

**–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ Pull Request‚Äô–∞**

<img width="593" height="249" alt="image" src="https://github.com/user-attachments/assets/a627eb72-17c9-42dd-be0d-08c8df31c855" />


**–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö Pull Request‚Äô–æ–≤**

–í–∏–¥–Ω–æ, —Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∑–Ω–∞—á–µ–Ω –Ω–∞ —Ä–µ–≤—å—é:

<img width="549" height="244" alt="image" src="https://github.com/user-attachments/assets/b24596f9-b499-4440-ad7c-1b86175ef538" />

**–ü–æ—Å–ª–µ merge**

<img width="583" height="237" alt="image" src="https://github.com/user-attachments/assets/8e423ed5-6239-43b1-95f3-db4a015c0bb1" />


---

### üìä –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—ã–ø–æ–ª–Ω–µ–Ω —Ç–µ—Å—Ç, —ç–º—É–ª–∏—Ä—É—é—â–∏–π –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã —Å Pull Request'–æ–º:
1. –°–æ–∑–¥–∞–Ω–∏–µ PR (—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º —Ä–µ–≤—å—é–µ—Ä–æ–≤)
2. –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ –∏–∑ —Ä–µ–≤—å—é–µ—Ä–æ–≤
3. –°–ª–∏—è–Ω–∏–µ PR

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã (50 PR):**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ: 50/50 —É—Å–ø–µ—à–Ω—ã—Ö (~135 RPS)
- ‚úÖ –°–ª–∏—è–Ω–∏–µ: 50/50 —É—Å–ø–µ—à–Ω—ã—Ö
- ‚ö†Ô∏è –ü–µ—Ä–µ–Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ: –≤—ã–ø–æ–ª–Ω–µ–Ω–æ –≤—ã–±–æ—Ä–æ—á–Ω–æ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≤—å—é–µ—Ä–æ–≤)

–í—ã–ø–æ–ª–Ω–µ–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

‚úÖ **50 PR –∑–∞ 0.37 —Å–µ–∫ ‚Üí ~135 RPS**

‚úÖ **–°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞: 19 –º—Å (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ: ‚â§ 300 –º—Å)**

‚úÖ **–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª PR (create ‚Üí reassign ‚Üí merge): 19 –º—Å**

‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ /stats –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**


–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ —Ñ–∞–π–ª–µ load-test-results.txt .

---
